{"version":3,"sources":["components/shop-header/index.js","components/shop-header/shop-header.js","actions/index.js","components/bookstore-service-context/bookstore-service-context.js","components/hoc/with-bookstore-service.js","utils/compose.js","components/spinner/index.js","components/spinner/spinner.js","components/error-indicator/index.js","components/error-indicator/error-indicator.js","components/book-list-item/index.js","components/book-list-item/book-list-item.js","components/book-list/index.js","components/book-list/book-list.js","components/book-list-container/book-list-container.js","components/book-list-container/index.js","components/shopping-cart-table/shopping-cart-table.js","components/pages/home-page.js","components/pages/cart-page.js","components/app/index.js","components/app/app.js","components/error-boundry/index.js","components/error-boundry/error-boundry.js","services/bookstore-service.js","reducers/index.js","store.js","index.js"],"names":["ShopHeader","numItems","total","className","to","bookAddedToCart","bookId","type","payload","fetchBooks","bookstoreService","dispatch","getBooks","then","data","catch","err","React","createContext","BookstoreServiceProvider","Provider","BookstoreServiceConsumer","Consumer","withBookstoreService","Wrapped","props","compose","funcs","comp","reduceRight","prev","func","Spinner","ErrorIndicator","BookListItem","book","onAddedToCart","title","author","price","coverImage","src","alt","href","onClick","BookList","books","map","key","id","BookListContainer","this","loading","error","Component","connect","mapDispatchToProps","onIncrease","onDecrease","onDelete","items","cartItems","orderTotal","item","idx","count","HomePage","CartPage","App","role","path","component","exact","ErrorBoundry","state","hasError","setState","children","BookstoreService","Promise","resolve","reject","setTimeout","Math","random","Error","initialState","updateCartItems","slice","updateOrder","quantity","find","itemIndex","findIndex","newItem","updateCartItem","reducer","action","store","createStore","ReactDOM","render","value","document","getElementById"],"mappings":"6VAEeA,G,MCGI,SAAC,GAAyB,IAAvBC,EAAsB,EAAtBA,SAAUC,EAAY,EAAZA,MAE5B,OACI,4BAAQC,UAAU,mBACd,kBAAC,IAAD,CAAMA,UAAU,iBAAiBC,GAAG,aAApC,WACA,kBAAC,IAAD,CAAMD,UAAU,gBAAgBC,GAAG,kBAC/B,uBAAGD,UAAU,kCACZF,EAFL,YAEwBC,EAFxB,Q,8CCWNG,EAAkB,SAACC,GACrB,MAAO,CACLC,KAAM,qBACNC,QAASF,IAkBTG,EAAa,SAACC,EAAkBC,GAAnB,OAAgC,WAE/CA,EA1CO,CACHJ,KAAM,wBA0CVG,EAAiBE,WACZC,MAAK,SAAAC,GAENH,EAvCG,CACHJ,KAAM,sBACNC,QAqCqBM,OAEpBC,OAAM,SAAAC,GAAG,OAAIL,EAlCX,CACHJ,KAAM,sBACNC,QAgCkCQ,S,EC7CtCC,IAAMC,gBAFIC,E,EAAVC,SACUC,E,EAAVC,SCgBWC,EAjBc,kBAAM,SAACC,GAEhC,OAAO,SAACC,GAEJ,OACI,kBAACJ,EAAD,MAEQ,SAACX,GACG,OAAQ,kBAACc,EAAD,iBAAaC,EAAb,CACIf,iBAAkBA,WCRvCgB,EAJC,sCAAIC,EAAJ,yBAAIA,EAAJ,uBAAc,SAACC,GAC3B,OAAOD,EAAME,aAAY,SAACC,EAAMC,GAAP,OAAgBA,EAAKD,KAAOF,KCC1CI,G,MCEC,WACZ,OAAO,6CCHIC,G,MCEQ,WACnB,OAAO,oGCHIC,G,MCEM,SAAC,GAA6B,IAA3BC,EAA0B,EAA1BA,KAAMC,EAAoB,EAApBA,cAClBC,EAAqCF,EAArCE,MAAOC,EAA8BH,EAA9BG,OAAQC,EAAsBJ,EAAtBI,MAAOC,EAAeL,EAAfK,WAC9B,OACI,yBAAKrC,UAAU,kBACX,yBAAKA,UAAU,cACX,yBAAKsC,IAAKD,EAAYE,IAAI,WAE9B,yBAAKvC,UAAU,gBACX,0BAAMwC,KAAK,IAAIxC,UAAU,cAAckC,GACvC,yBAAKlC,UAAU,eAAemC,GAC9B,yBAAKnC,UAAU,cAAcoC,GAC7B,4BAAQpC,UAAU,2BACVyC,QAASR,GADjB,mBCbDS,G,MCKE,SAAC,GAA8B,IAA5BC,EAA2B,EAA3BA,MAAOV,EAAoB,EAApBA,cACvB,OACI,wBAAIjC,UAAU,aAEN2C,EAAMC,KAAI,SAAAZ,GACN,OACI,wBAAIa,IAAKb,EAAKc,IACV,kBAAC,EAAD,CAAcd,KAAMA,EAChBC,cAAe,kBAAMA,EAAcD,EAAKc,cCJlEC,E,4LAIEC,KAAK1B,MAAMhB,e,+BAIL,IAAD,EAC4C0C,KAAK1B,MAA9CqB,EADH,EACGA,MAAOM,EADV,EACUA,QAASC,EADnB,EACmBA,MAAOjB,EAD1B,EAC0BA,cAC/B,OAAIgB,EACO,kBAAC,EAAD,MAGPC,EACO,kBAAC,EAAD,MAGJ,kBAAC,EAAD,CAAUP,MAAOA,EACZV,cAAeA,Q,GAnBHkB,aCTjBJ,EDmDAxB,EACXH,IACAgC,aAnBoB,SAAC,GACrB,MAAO,CACHT,MAF+C,EAA5BA,MAGnBM,QAH+C,EAArBA,QAI1BC,MAJ+C,EAAZA,UAQhB,SAAC1C,EAAD,GAAqC,IAAxBD,EAAuB,EAAvBA,iBAEpC,MAAO,CACHD,WAAYA,EAAWC,EAAkBC,GACzCyB,cAAe,SAACa,GAAD,OAAQtC,EAASN,EAAgB4C,SAKzCvB,CAIdwB,GEeKM,G,MAAqB,CACvBC,WAAYpD,EACZqD,Wd9CwB,SAACpD,GACzB,MAAO,CACLC,KAAM,yBACNC,QAASF,Ic4CXqD,SdxC4B,SAACrD,GAC7B,MAAO,CACLC,KAAM,8BACNC,QAASF,McwCAiD,eAbS,SAAC,GACrB,MAAO,CACHK,MAF8C,EAA3BC,UAGnB3D,MAH8C,EAAhB4D,cAaEN,EAAzBD,EAlEW,SAAC,GAAwD,IAAtDK,EAAqD,EAArDA,MAAO1D,EAA8C,EAA9CA,MAAOuD,EAAuC,EAAvCA,WAAYC,EAA2B,EAA3BA,WAAYC,EAAe,EAAfA,SA4B/D,OACI,yBAAKxD,UAAU,uBACX,0CACA,2BAAOA,UAAU,SACb,+BACI,4BACI,iCACA,oCACA,qCACA,qCACA,wCAGR,+BACKyD,EAAMb,KAxCL,SAACgB,EAAMC,GAAS,IACvBf,EAA2Bc,EAA3Bd,GAAIZ,EAAuB0B,EAAvB1B,MAAO4B,EAAgBF,EAAhBE,MAAO/D,EAAS6D,EAAT7D,MACzB,OACI,wBAAI8C,IAAKC,GACL,4BAAKe,EAAM,GACX,4BAAK3B,GACL,4BAAK4B,GACL,gCAAM/D,GACN,4BACI,4BAAQC,UAAU,4CACVyC,QAAS,kBAAMe,EAASV,KAC5B,uBAAG9C,UAAU,mBAEjB,4BAAQA,UAAU,6CACVyC,QAAS,kBAAMa,EAAWR,KAC9B,uBAAG9C,UAAU,uBAEjB,4BAAQA,UAAU,6CACVyC,QAAS,kBAAMc,EAAWT,KAC9B,uBAAG9C,UAAU,+BAyBzB,yBAAKA,UAAU,SAAf,WACaD,OC7CVgE,EAVE,WAEb,OACI,6BACI,kBAAC,EAAD,MACA,kBAAC,EAAD,QCHGC,EAJE,WACb,OAAO,2CCDIC,G,MCMH,WAER,OACI,0BAAMC,KAAK,OAAOlE,UAAU,aACxB,kBAAC,EAAD,CAAYF,SAAU,EAAGC,MAAO,MAChC,kBAAC,IAAD,KACI,kBAAC,IAAD,CAAOoE,KAAK,aACRC,UAAWL,EACXM,OAAK,IACT,kBAAC,IAAD,CAAOF,KAAK,iBACRC,UAAWJ,QChBhBM,E,2MCIXC,MAAQ,CACJC,UAAU,G,mFAIVxB,KAAKyB,SAAS,CAACD,UAAU,M,+BAKzB,OAAIxB,KAAKuB,MAAMC,SACJ,kBAAC,EAAD,MAGJxB,KAAK1B,MAAMoD,a,GAhBgBvB,aCJrBwB,E,iDAEjBhE,KAAO,CACH,CACImC,GAAI,EACJZ,MAAO,iCACPC,OAAQ,kBACRC,MAAO,GACPC,WAAY,4FAEhB,CACIS,GAAI,EACJZ,MAAO,cACPC,OAAQ,oBACRC,MAAO,GACPC,WAAY,6F,uDAIR,IAAD,OACP,OAAO,IAAIuC,SAAQ,SAACC,EAASC,GACzBC,YAAW,WACHC,KAAKC,SAAW,IAChBH,EAAO,IAAII,MAAM,2BAEjBL,EAAQ,EAAKlE,QAIlB,Y,6BC7BTwE,EAAe,CACjBxC,MAAO,GACPM,SAAS,EACTC,OAAO,EACPQ,UAAW,GACXC,WAAY,KAGVyB,EAAkB,SAAC1B,EAAWE,EAAMC,GAEtC,OAAmB,IAAfD,EAAKE,MACD,GAAN,mBACKJ,EAAU2B,MAAM,EAAGxB,IADxB,YAEKH,EAAU2B,MAAMxB,EAAM,MAIhB,IAATA,EACI,GAAN,mBACKH,GADL,CAEEE,IAIE,GAAN,mBACKF,EAAU2B,MAAM,EAAGxB,IADxB,CAEED,GAFF,YAGKF,EAAU2B,MAAMxB,EAAM,MAoBvByB,EAAc,SAACf,EAAOpE,EAAQoF,GAAc,IACxC5C,EAAqB4B,EAArB5B,MAAOe,EAAca,EAAdb,UAET1B,EAAOW,EAAM6C,MAAK,qBAAE1C,KAAe3C,KACnCsF,EAAY/B,EAAUgC,WAAU,qBAAE5C,KAAe3C,KAGjDwF,EAvBe,SAAC3D,GAA+B,IAAzB4B,EAAwB,uDAAjB,GAAI2B,EAAa,yCAMpC3B,EAHdd,UAHkD,MAG7Cd,EAAKc,GAHwC,IAMpCc,EAFdE,aAJkD,MAI1C,EAJ0C,IAMpCF,EADd1B,aALkD,MAK1CF,EAAKE,MALqC,IAMpC0B,EAAd7D,aANkD,MAM1C,EAN0C,EAQpD,MAAO,CACL+C,KACAZ,QACA4B,MAAOA,EAAQyB,EACfxF,MAAOA,EAAQwF,EAAWvD,EAAKI,OAWjBwD,CAAe5D,EAFlB0B,EAAU+B,GAEoBF,GAC3C,OAAO,eACFhB,EADL,CAEEb,UAAW0B,EAAgB1B,EAAWiC,EAASF,MA2CtCI,EAvCC,WAAmC,IAAlCtB,EAAiC,uDAAzBY,EAAcW,EAAW,uCAE9C,OAAOA,EAAO1F,MACV,IAAK,sBACD,OAAO,eACAmE,EADP,CAEI5B,MAAOmD,EAAOzF,QACd4C,SAAS,EACTC,OAAO,IAEf,IAAK,sBACD,OAAO,eACAqB,EADP,CAEI5B,MAAO,GACPM,SAAS,EACTC,OAAO,IAEf,IAAK,sBACD,OAAO,eACAqB,EADP,CAEI5B,MAAO,GACPM,SAAS,EACTC,MAAO4C,EAAOzF,UAElB,IAAK,qBACD,OAAOiF,EAAYf,EAAOuB,EAAOzF,QAAS,GAE5C,IAAK,yBACH,OAAOiF,EAAYf,EAAOuB,EAAOzF,SAAU,GAE7C,IAAK,8BACH,IAAMuD,EAAOW,EAAMb,UAAU8B,MAAK,qBAAE1C,KAAegD,EAAOzF,WAC1D,OAAOiF,EAAYf,EAAOuB,EAAOzF,SAAUuD,EAAKE,OAExD,QACI,OAAOS,IC3FJwB,EAFDC,YAAYH,GCSpBtF,EAAmB,IAAIoE,EAE7BsB,IAASC,OACL,kBAAC,IAAD,CAAUH,MAAOA,GACb,kBAAC,EAAD,KACI,kBAAC/E,EAAD,CAA0BmF,MAAO5F,GAC7B,kBAAC,IAAD,KACI,kBAAC,EAAD,UAKhB6F,SAASC,eAAe,W","file":"static/js/main.45018a1a.chunk.js","sourcesContent":["import ShopHeader from './shop-header';\r\n\r\nexport default ShopHeader;","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport './shop-header.css';\r\n\r\nconst ShopHeader = ({ numItems, total }) => {\r\n\r\n    return (\r\n        <header className=\"shop-header row\">\r\n            <Link className=\"logo text-dark\" to=\"/re-store\">ReStore</Link>\r\n            <Link className=\"shopping-cart\" to=\"/re-store/cart\">\r\n                <i className=\"cart-icon fa fa-shopping-cart\" />\r\n                {numItems} items (${total})\r\n            </Link>\r\n        </header>\r\n    )\r\n}\r\n\r\nexport default ShopHeader;","const booksRequested = () => {\r\n    \r\n    return {\r\n        type: 'FETCH-BOOKS_REQUEST',\r\n    }\r\n}\r\n\r\nconst booksLoaded = (newBooks) => {\r\n\r\n    return {\r\n        type: 'FETCH-BOOKS_SUCCESS',\r\n        payload: newBooks,\r\n    }\r\n}\r\n\r\nconst booksError = (error) => {\r\n    return {\r\n        type: 'FETCH-BOOKS_FAILURE',\r\n        payload: error,\r\n    }\r\n}\r\nconst bookAddedToCart = (bookId) => {\r\n    return {\r\n      type: 'BOOK_ADDED_TO_CART',\r\n      payload: bookId\r\n    };\r\n};\r\n  \r\nconst bookRemovedFromCart = (bookId) => {\r\n    return {\r\n      type: 'BOOK_REMOVED_FROM_CART',\r\n      payload: bookId\r\n    };\r\n};\r\n  \r\nconst allBooksRemovedFromCart = (bookId) => {\r\n    return {\r\n      type: 'ALL_BOOKS_REMOVED_FROM_CART',\r\n      payload: bookId\r\n    };\r\n};\r\n\r\nconst fetchBooks = (bookstoreService, dispatch) => () => {\r\n\r\n    dispatch(booksRequested());\r\n    bookstoreService.getBooks()\r\n        .then(data => {\r\n            // dispatch action to store\r\n        dispatch(booksLoaded(data))\r\n        })\r\n        .catch(err => dispatch(booksError(err)));\r\n}\r\n\r\nexport {\r\n    fetchBooks,\r\n    bookAddedToCart,\r\n    bookRemovedFromCart,\r\n    allBooksRemovedFromCart,\r\n}","import React from 'react';\r\n\r\nconst {\r\n    Provider: BookstoreServiceProvider,\r\n    Consumer: BookstoreServiceConsumer\r\n} = React.createContext();\r\n\r\nexport {\r\n    BookstoreServiceProvider,\r\n    BookstoreServiceConsumer,\r\n}","import React from 'react';\r\nimport { BookstoreServiceConsumer } from '../bookstore-service-context';\r\n\r\nconst withBookstoreService = () => (Wrapped) => {\r\n\r\n    return (props) => {\r\n\r\n        return (\r\n            <BookstoreServiceConsumer>\r\n                {\r\n                    (bookstoreService) => {\r\n                        return (<Wrapped {...props}\r\n                                    bookstoreService={bookstoreService} />)\r\n                    }\r\n                }\r\n            </BookstoreServiceConsumer>\r\n        )\r\n    }\r\n}\r\n\r\nexport default withBookstoreService;","const compose = (...funcs) => (comp) => {\r\n    return funcs.reduceRight((prev, func) => func(prev), comp)\r\n}\r\n\r\nexport default compose;","import Spinner from './spinner';\r\n\r\nexport default Spinner;","import React from 'react';\r\n\r\nimport './spinner.css';\r\n\r\nconst Spinner = () => {\r\n    return <div>loading...</div>\r\n}\r\n\r\nexport default Spinner;","import ErrorIndicator from './error-indicator';\r\n\r\nexport default ErrorIndicator;","import React from 'react';\r\n\r\nimport './error-indicator.css';\r\n\r\nconst ErrorIndicator = () => {\r\n    return <div>Oops! Something went wrong. Please reload the page and try again.</div>\r\n}\r\n\r\nexport default ErrorIndicator;","import BookListItem from './book-list-item';\r\n\r\nexport default BookListItem;","import React from 'react';\r\n\r\nimport './book-list-item.css';\r\n\r\nconst BookListItem = ({ book, onAddedToCart }) => {\r\n    const { title, author, price, coverImage } = book;\r\n    return (\r\n        <div className=\"book-list-item\">\r\n            <div className=\"book-cover\">\r\n                <img src={coverImage} alt=\"cover\" />\r\n            </div>\r\n            <div className=\"book-details\">\r\n                <span href=\"#\" className=\"book-title\">{title}</span>\r\n                <div className=\"book-author\">{author}</div>\r\n                <div className=\"book-price\">{price}</div>\r\n                <button className=\"btn btn-info add-to-cart\"\r\n                        onClick={onAddedToCart}>Add to cart</button>\r\n            </div>\r\n           \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default BookListItem;","import BookList from './book-list';\r\n\r\nexport default BookList;","import React from 'react';\r\n\r\n\r\nimport BookListItem from '../book-list-item';\r\n\r\nimport './book-list.css';\r\n\r\nconst BookList = ({ books, onAddedToCart }) => {\r\n    return (\r\n        <ul className=\"book-list\">\r\n            {\r\n                books.map(book => {\r\n                    return (\r\n                        <li key={book.id}>\r\n                            <BookListItem book={book}\r\n                                onAddedToCart={() => onAddedToCart(book.id)} />\r\n                        </li>\r\n                    )\r\n                })\r\n            }\r\n        </ul>\r\n    )\r\n}\r\n\r\nexport default BookList;","import React, { Component } from 'react';\r\n\r\nimport { connect } from 'react-redux';\r\n\r\nimport { fetchBooks, bookAddedToCart } from '../../actions';\r\nimport { withBookstoreService } from '../hoc';\r\nimport { compose } from '../../utils';\r\nimport Spinner from '../spinner';\r\nimport ErrorIndicator from '../error-indicator';\r\nimport BookList from '../book-list';\r\n\r\nclass BookListContainer extends Component {\r\n\r\n    componentDidMount() {\r\n        // from mapDispatchToProps\r\n        this.props.fetchBooks();\r\n        \r\n    }\r\n\r\n    render() {\r\n        const { books, loading, error, onAddedToCart } = this.props;\r\n        if (loading) {\r\n            return <Spinner />\r\n        }\r\n\r\n        if (error) {\r\n            return <ErrorIndicator />\r\n        }\r\n\r\n        return <BookList books={books}\r\n                    onAddedToCart={onAddedToCart} />\r\n\r\n        \r\n    }\r\n}\r\n\r\nconst mapStateToProps = ({ books, loading, error }) => {\r\n    return {\r\n        books,\r\n        loading,\r\n        error,\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch, { bookstoreService }) => {\r\n    \r\n    return {\r\n        fetchBooks: fetchBooks(bookstoreService, dispatch),\r\n        onAddedToCart: (id) => dispatch(bookAddedToCart(id))\r\n    }\r\n\r\n}\r\n\r\nexport default compose(\r\n    withBookstoreService(),\r\n    connect(mapStateToProps, mapDispatchToProps)\r\n)\r\n(BookListContainer)","import BookListContainer from './book-list-container';\r\n\r\nexport default BookListContainer;","import React from 'react';\r\n\r\nimport { connect } from 'react-redux';\r\n\r\nimport {\r\n    bookAddedToCart,\r\n    bookRemovedFromCart,\r\n    allBooksRemovedFromCart,\r\n} from '../../actions';\r\n\r\nimport './shopping-cart-table.css';\r\n\r\nconst ShoppingCartTable = ({ items, total, onIncrease, onDecrease, onDelete }) => {\r\n\r\n    const renderRow = (item, idx) => {\r\n        const {id, title, count, total} = item;\r\n        return (\r\n            <tr key={id}>\r\n                <td>{idx + 1}</td>\r\n                <td>{title}</td>\r\n                <td>{count}</td>\r\n                <td>${total}</td>\r\n                <td>\r\n                    <button className=\"btn btn-outline-danger btn-sm float-right\"\r\n                            onClick={() => onDelete(id)}>\r\n                        <i className=\"fa fa-trash-o\" />\r\n                    </button>\r\n                    <button className=\"btn btn-outline-success btn-sm float-right\"\r\n                            onClick={() => onIncrease(id)}>\r\n                        <i className=\"fa fa-plus-circle\" />\r\n                    </button>\r\n                    <button className=\"btn btn-outline-warning btn-sm float-right\"\r\n                            onClick={() => onDecrease(id)}>\r\n                        <i className=\"fa fa-minus-circle\" />\r\n                    </button>\r\n                </td>\r\n            </tr>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <div className=\"shopping-cart-table\">\r\n            <h2>Your Order</h2>\r\n            <table className=\"table\">\r\n                <thead>\r\n                    <tr>\r\n                        <th>#</th>\r\n                        <th>Item</th>\r\n                        <th>Count</th>\r\n                        <th>Price</th>\r\n                        <th>Action</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    {items.map(renderRow)}\r\n                </tbody>\r\n            </table>\r\n\r\n            <div className=\"total\">\r\n                Total: ${total}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = ({ cartItems, orderTotal}) => {\r\n    return {\r\n        items: cartItems,\r\n        total: orderTotal,\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    onIncrease: bookAddedToCart,\r\n    onDecrease: bookRemovedFromCart,\r\n    onDelete: allBooksRemovedFromCart,\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ShoppingCartTable);","import React from 'react';\r\nimport BookListContainer from '../book-list-container';\r\nimport ShoppingCartTable from '../shopping-cart-table/shopping-cart-table';\r\n\r\nconst HomePage = () => {\r\n\r\n    return (\r\n        <div>\r\n            <BookListContainer />\r\n            <ShoppingCartTable />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default HomePage;","import React from 'react';\r\n\r\nconst CartPage = () => {\r\n    return <div>Cart Page</div>\r\n}\r\n\r\nexport default CartPage;","import App from './app';\r\n\r\nexport default App;","import React from 'react';\r\nimport ShopHeader from '../shop-header';\r\nimport { Route, Switch } from 'react-router-dom';\r\n\r\nimport { HomePage, CartPage } from '../pages';\r\n\r\nimport './app.css';\r\n\r\nconst App = () => {\r\n\r\n    return (\r\n        <main role=\"main\" className=\"container\">\r\n            <ShopHeader numItems={5} total={210} />\r\n            <Switch>\r\n                <Route path='/re-store/'\r\n                    component={HomePage}\r\n                    exact />\r\n                <Route path='/re-store/cart'\r\n                    component={CartPage} />\r\n            </Switch>\r\n        </main>\r\n      \r\n    )\r\n}\r\n\r\nexport default App;","import ErrorBoundry from './error-boundry';\r\n\r\nexport default ErrorBoundry;","import React, { Component } from 'react';\r\n\r\nimport ErrorIndicator from '../error-indicator';\r\n\r\nexport default class ErrorBoundry extends Component {\r\n\r\n    state = {\r\n        hasError: false,\r\n    }\r\n\r\n    componentDidCatch() {\r\n        this.setState({hasError: true})\r\n    }\r\n\r\n    render() {\r\n\r\n        if (this.state.hasError) {\r\n            return <ErrorIndicator />\r\n        }\r\n\r\n        return this.props.children;\r\n    }\r\n}","export default class BookstoreService {\r\n\r\n    data = [\r\n        {\r\n            id: 1,\r\n            title: 'Prodaction-Ready Microservices',\r\n            author: 'Susan J. Fowler',\r\n            price: 32,\r\n            coverImage: 'https://images-na.ssl-images-amazon.com/images/I/41yJ75gpV-L._SX381_BO1,204,203,200_.jpg',\r\n        },\r\n        {\r\n            id: 2,\r\n            title: 'Release it!',\r\n            author: 'Michael T. Nygard',\r\n            price: 45,\r\n            coverImage: 'https://images-na.ssl-images-amazon.com/images/I/414CRjLjwgL._SX403_BO1,204,203,200_.jpg'\r\n        }\r\n    ]\r\n\r\n    getBooks() {\r\n        return new Promise((resolve, reject) => {\r\n            setTimeout(() => {\r\n                if (Math.random() > .75) {\r\n                    reject(new Error('Something bad happened'))\r\n                } else {\r\n                    resolve(this.data)\r\n                }\r\n\r\n               \r\n            }, 900)\r\n        })\r\n    }\r\n}","const initialState = {\r\n    books: [],\r\n    loading: true,\r\n    error: false,\r\n    cartItems: [],\r\n    orderTotal: 220\r\n}\r\n\r\nconst updateCartItems = (cartItems, item, idx) => {\r\n\r\n    if (item.count === 0) {\r\n      return [\r\n        ...cartItems.slice(0, idx),\r\n        ...cartItems.slice(idx + 1)\r\n      ];\r\n    }\r\n  \r\n    if (idx === -1) {\r\n      return [\r\n        ...cartItems,\r\n        item\r\n      ];\r\n    }\r\n  \r\n    return [\r\n      ...cartItems.slice(0, idx),\r\n      item,\r\n      ...cartItems.slice(idx + 1)\r\n    ];\r\n};\r\n  \r\n  const updateCartItem = (book, item = {}, quantity) => {\r\n  \r\n    const {\r\n      id = book.id,\r\n      count = 0,\r\n      title = book.title,\r\n      total = 0 } = item;\r\n  \r\n    return {\r\n      id,\r\n      title,\r\n      count: count + quantity,\r\n      total: total + quantity * book.price\r\n    };\r\n};\r\n  \r\n  const updateOrder = (state, bookId, quantity) => {\r\n    const { books, cartItems } = state;\r\n  \r\n    const book = books.find(({id}) => id === bookId);\r\n    const itemIndex = cartItems.findIndex(({id}) => id === bookId);\r\n    const item = cartItems[itemIndex];\r\n  \r\n    const newItem = updateCartItem(book, item, quantity);\r\n    return {\r\n      ...state,\r\n      cartItems: updateCartItems(cartItems, newItem, itemIndex)\r\n    };\r\n};\r\n\r\nconst reducer = (state = initialState, action) => {\r\n\r\n    switch(action.type) {\r\n        case 'FETCH-BOOKS_SUCCESS':\r\n            return {\r\n                ...state,\r\n                books: action.payload,\r\n                loading: false,\r\n                error: false,\r\n            }\r\n        case 'FETCH-BOOKS_REQUEST':\r\n            return {\r\n                ...state,\r\n                books: [],\r\n                loading: true,\r\n                error: false,\r\n            }\r\n        case 'FETCH-BOOKS_FAILURE':\r\n            return {\r\n                ...state,\r\n                books: [],\r\n                loading: false,\r\n                error: action.payload,\r\n            }\r\n            case 'BOOK_ADDED_TO_CART':\r\n                return updateOrder(state, action.payload, 1);\r\n          \r\n              case 'BOOK_REMOVED_FROM_CART':\r\n                return updateOrder(state, action.payload, -1);\r\n          \r\n              case 'ALL_BOOKS_REMOVED_FROM_CART':\r\n                const item = state.cartItems.find(({id}) => id === action.payload);\r\n                return updateOrder(state, action.payload, -item.count);\r\n          \r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport default reducer;","import { createStore } from 'redux';\r\nimport reducer from './reducers';\r\n\r\nconst store = createStore(reducer);\r\n\r\nexport default store;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from 'react-redux';\r\nimport { BrowserRouter as Router } from 'react-router-dom';\r\n\r\nimport App from './components/app';\r\nimport ErrorBoundry from './components/error-boundry';\r\nimport { BookstoreServiceProvider } from './components/bookstore-service-context';\r\nimport { BookstoreService } from './services';\r\n\r\nimport store from './store';\r\n\r\nconst bookstoreService = new BookstoreService();\r\n\r\nReactDOM.render(\r\n    <Provider store={store}>\r\n        <ErrorBoundry>\r\n            <BookstoreServiceProvider value={bookstoreService}>\r\n                <Router>\r\n                    <App />\r\n                </Router>\r\n            </BookstoreServiceProvider>\r\n        </ErrorBoundry>\r\n    </Provider>,\r\n    document.getElementById('root')\r\n)"],"sourceRoot":""}