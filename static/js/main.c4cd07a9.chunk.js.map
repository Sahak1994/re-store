{"version":3,"sources":["components/error-indicator/Error-512.webp","components/shop-header/index.js","components/shop-header/shop-header.js","actions/index.js","components/bookstore-service-context/bookstore-service-context.js","components/hoc-helpers/with-bookstore-service.js","components/spinner/index.js","components/spinner/spinner.js","components/error-indicator/index.js","components/error-indicator/error-indicator.js","components/book-list-item/index.js","components/book-list-item/book-list-item.js","components/book-list/index.js","components/book-list/book-list.js","containers/book-list-container.js","containers/index.js","utils.js","components/shopping-cart-table/shopping-cart-table.js","components/pages/home-page.js","components/pages/cart-page.js","components/app/index.js","components/app/app.js","components/error-boundry/index.js","components/error-boundry/error-boundry.js","services/bookstore-service.js","reducers/book-list.js","reducers/shopping-cart.js","reducers/index.js","store.js","index.js"],"names":["module","exports","ShopHeader","connect","shoppingCart","countTotal","orderTotal","numItems","total","className","to","bookAddedToCart","bookId","type","payload","fetchBooks","bookstoreService","dispatch","getBooks","then","data","catch","err","React","createContext","BookstoreServiceProvider","Provider","BookstoreServiceConsumer","Consumer","withBookstoreService","Wrapped","props","Spinner","ErrorIndicator","src","icon","alt","BookListItem","book","onAddedToCart","title","author","price","coverImage","onClick","BookList","books","map","id","key","BookListContainer","this","loading","error","Component","funcs","comp","reduceRight","prev","func","compose","bookList","bindActionCreators","items","cartItems","onIncrease","onDecrease","onDelete","item","idx","count","HomePage","CartPage","App","role","path","exact","component","ErrorBoundry","state","hasError","setState","children","BookstoreService","Promise","resolve","reject","setTimeout","Math","random","Error","updateBookList","action","undefined","updateCartItems","slice","updateOrderTotal","totalSum","forEach","updateCountTotal","updateOrder","quantity","find","findIndex","newItem","updateCartItem","updateShoppingCart","reducer","store","createStore","applyMiddleware","thunkMiddleware","next","ReactDOM","render","value","document","getElementById"],"mappings":"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","file":"static/js/main.c4cd07a9.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/Error-512.5a0c4058.webp\";","import ShopHeader from './shop-header';\r\n\r\nexport default ShopHeader;","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\n\r\nimport './shop-header.css';\r\n\r\nconst ShopHeader = ({ numItems, total, countTotal, orderTotal }) => {\r\n\r\n    return (\r\n        <header className=\"shop-header row\">\r\n             <Link to=\"/re-store/home\">\r\n                <div className=\"logo text-dark\">ReStore</div>\r\n            </Link>\r\n            <Link to=\"/re-store/cart\">\r\n                <div className=\"shopping-cart\">\r\n                    <i className=\"cart-icon fa fa-shopping-cart\" />\r\n                    {countTotal} items (${orderTotal})\r\n                </div>\r\n            </Link>\r\n        </header>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = ({ shoppingCart : { countTotal, orderTotal }}) => {\r\n    return {\r\n        countTotal,\r\n        orderTotal,\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(ShopHeader);","const fetchBooksRequest = () => {\r\n   return 'FETCH_BOOKS_REQUEST'\r\n}\r\n\r\nconst fetchBooksSuccess = (newBooks) => {\r\n    return {\r\n        type: 'FETCH_BOOKS_SUCCESS',\r\n        payload: newBooks,\r\n    }\r\n}\r\n\r\nconst fetchBooksFailure = (error) => {\r\n    return {\r\n        type: 'FETCH_BOOKS_FAILURE',\r\n        payload: error,\r\n    }\r\n}\r\n\r\nexport const bookAddedToCart = (bookId) => {\r\n    return {\r\n      type: 'BOOK_ADDED_TO_CART',\r\n      payload: bookId\r\n    };\r\n};\r\n  \r\nexport const bookRemovedFromCart = (bookId) => {\r\n    return {\r\n      type: 'BOOK_REMOVED_FROM_CART',\r\n      payload: bookId\r\n    };\r\n};\r\n  \r\nexport const allBooksRemovedFromCart = (bookId) => {\r\n    return {\r\n      type: 'ALL_BOOKS_REMOVED_FROM_CART',\r\n      payload: bookId\r\n    };\r\n};\r\n\r\n// const fetchBooksOld = (bookstoreService, dispatch) => () => {\r\n//     dispatch(booksRequested());\r\n\r\n//     bookstoreService.getBooks()\r\n//         .then(data => {\r\n//             // dispatch action to store\r\n//         dispatch(booksLoaded(data))\r\n//         })\r\n//         .catch(err => dispatch(booksError(err)));\r\n// }\r\n\r\nconst fetchBooks = (bookstoreService) => () => (dispatch) => {\r\n    dispatch( fetchBooksRequest() );\r\n \r\n    bookstoreService.getBooks()\r\n       .then((data) => {\r\n          dispatch( fetchBooksSuccess(data) )\r\n       })\r\n       .catch((err) => dispatch( fetchBooksFailure(err) ));\r\n }\r\n\r\nexport {\r\n    fetchBooks,\r\n}","import React from 'react';\r\n\r\nconst {\r\n    Provider: BookstoreServiceProvider,\r\n    Consumer: BookstoreServiceConsumer\r\n} = React.createContext();\r\n\r\nexport {\r\n    BookstoreServiceProvider,\r\n    BookstoreServiceConsumer,\r\n}","import React from 'react';\r\n\r\nimport { BookstoreServiceConsumer } from '../bookstore-service-context';\r\n\r\nconst withBookstoreService = () => (Wrapped) => {\r\n\r\n    return (props) => {\r\n        return (\r\n            <BookstoreServiceConsumer>\r\n                {\r\n                    (bookstoreService) => {\r\n                        return (<Wrapped \r\n                                    {...props}\r\n                                    bookstoreService={bookstoreService} />)\r\n                    }\r\n                }\r\n            </BookstoreServiceConsumer>\r\n        )\r\n    }\r\n}\r\n\r\nexport default withBookstoreService;","import Spinner from './spinner';\r\n\r\nexport default Spinner;","import React from 'react';\r\n\r\nimport './spinner.css';\r\n\r\nconst Spinner = () => {\r\n    \r\n    return (\r\n        <div className=\"spinner loadingio-spinner-double-ring-u6tbx1odk4\">\r\n            <div className=\"ldio-0qvsy8lw1528\">\r\n                <div></div><div></div>\r\n                <div><div></div></div>\r\n                <div><div></div></div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Spinner;","import ErrorIndicator from './error-indicator';\r\n\r\nexport default ErrorIndicator;","import React from 'react';\r\n\r\nimport icon from './Error-512.webp';\r\n\r\nimport './error-indicator.css';\r\n\r\nconst ErrorIndicator = () => {\r\n    return (\r\n        <div className=\"error-indicator jumbotron\">\r\n            <img className=\"error-icon\" src={icon} alt='error icon' />\r\n            <div>Oops! Something went wrong. Please reload the page and try again.</div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ErrorIndicator;","import BookListItem from './book-list-item';\r\n\r\nexport default BookListItem;","import React from 'react';\r\n\r\nimport './book-list-item.css';\r\n\r\nconst BookListItem = ({ book, onAddedToCart }) => {\r\n    const { title, author, price, coverImage } = book;\r\n    return (\r\n        <div className=\"book-list-item\">\r\n            <div className=\"book-cover\">\r\n                <img src={coverImage} alt=\"cover\" />\r\n            </div>\r\n            <div className=\"book-details\">\r\n                <span className=\"book-title\">{title}</span>\r\n                <span className=\"book-author\">{author}</span>\r\n                <span className=\"book-price\">${price}</span>\r\n                <button \r\n                    className=\"btn btn-info add-to-cart\"\r\n                    onClick={onAddedToCart}>\r\n                        Add to cart\r\n                </button>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default BookListItem;","import BookList from './book-list';\r\n\r\nexport default BookList;","import React from 'react';\r\n\r\nimport BookListItem from '../book-list-item';\r\n\r\nimport './book-list.css';\r\n\r\nconst BookList = ({ books, onAddedToCart }) => {\r\n    return (\r\n        <ul className=\"book-list\">\r\n            {\r\n                books.map((book) => {\r\n                    const { id } = book\r\n                    return (\r\n                        <li key={id}>\r\n                            <BookListItem \r\n                                book={book}\r\n                                onAddedToCart={() => onAddedToCart(id)} />\r\n                        </li>\r\n                    )\r\n                })\r\n            }\r\n        </ul>\r\n    )\r\n}\r\n\r\nexport default BookList;\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { bindActionCreators } from 'redux';\r\n\r\nimport { fetchBooks, bookAddedToCart } from '../actions';\r\nimport { withBookstoreService } from '../components/hoc-helpers';\r\nimport { compose } from '../utils';\r\nimport Spinner from '../components/spinner';\r\nimport ErrorIndicator from '../components/error-indicator';\r\nimport BookList from '../components/book-list'\r\n\r\nclass BookListContainer extends Component {\r\n\r\n    componentDidMount() {\r\n        this.props.fetchBooks(); \r\n    }\r\n\r\n    render() {\r\n        const { books, loading, error, onAddedToCart } = this.props;\r\n        if (loading) {\r\n            return <Spinner />\r\n        }\r\n\r\n        if (error) {\r\n            return <ErrorIndicator />\r\n        }\r\n\r\n        return <BookList \r\n                    books={books}\r\n                    onAddedToCart={onAddedToCart} />\r\n\r\n        \r\n    }\r\n}\r\n\r\nconst mapStateToProps = ({ bookList: { books, loading, error } }) => {\r\n    return {\r\n        books,\r\n        loading,\r\n        error,\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch, { bookstoreService }) => {\r\n    \r\n    return bindActionCreators({\r\n        fetchBooks: fetchBooks(bookstoreService),\r\n        onAddedToCart: bookAddedToCart,\r\n     }, dispatch)\r\n\r\n}\r\n\r\nexport default compose(\r\n    withBookstoreService(),\r\n    connect(mapStateToProps, mapDispatchToProps)\r\n)(BookListContainer)\r\n","import BookListContainer from './book-list-container';\r\n\r\nexport default BookListContainer;","const compose = (...funcs) => (comp) => {\r\n   return funcs.reduceRight((prev, func) => func(prev), comp)\r\n}\r\n\r\nexport {\r\n   compose\r\n};","import React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport {\r\n    bookAddedToCart,\r\n    bookRemovedFromCart,\r\n    allBooksRemovedFromCart,\r\n} from '../../actions';\r\n\r\nimport './shopping-cart-table.css';\r\n\r\nconst ShoppingCartTable = ({ items, total, onIncrease, onDecrease, onDelete }) => {\r\n\r\n    const renderRow = (item, idx) => {\r\n        const {id, title, count, total} = item;\r\n        return (\r\n            <tr key={id}>\r\n                <td>{idx + 1}</td>\r\n                <td>{title}</td>\r\n                <td>{count}</td>\r\n                <td>${total}</td>\r\n                <td>\r\n                    <button className=\"btn btn-outline-danger btn-sm float-right\"\r\n                            onClick={() => onDelete(id)}>\r\n                        <i className=\"fa fa-trash-o\" />\r\n                    </button>\r\n                    <button className=\"btn btn-outline-success btn-sm float-right\"\r\n                            onClick={() => onIncrease(id)}>\r\n                        <i className=\"fa fa-plus-circle\" />\r\n                    </button>\r\n                    <button className=\"btn btn-outline-warning btn-sm float-right\"\r\n                            onClick={() => onDecrease(id)}>\r\n                        <i className=\"fa fa-minus-circle\" />\r\n                    </button>\r\n                </td>\r\n            </tr>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <div className=\"shopping-cart-table\">\r\n            <h2>Your Order</h2>\r\n            <table className=\"table\">\r\n                <thead>\r\n                    <tr>\r\n                        <th>#</th>\r\n                        <th>Item</th>\r\n                        <th>Count</th>\r\n                        <th>Total</th>\r\n                        <th>Action</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    { items.map(renderRow) }\r\n                </tbody>\r\n            </table>\r\n\r\n            <div className=\"total\">\r\n                Total: ${total}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = ({ shoppingCart: { cartItems, orderTotal } }) => {\r\n    return {\r\n        items: cartItems,\r\n        total: orderTotal,\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n       onIncrease: (id) => dispatch( bookAddedToCart(id) ),\r\n       onDecrease: (id) => dispatch ( bookRemovedFromCart(id) ),\r\n       onDelete: (id) => dispatch( allBooksRemovedFromCart(id) )\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ShoppingCartTable);","import React from 'react';\r\n\r\nimport BookListContainer from '../../containers';\r\nimport ShoppingCartTable from '../shopping-cart-table/shopping-cart-table';\r\n\r\nconst HomePage = () => {\r\n    return (\r\n        <div>\r\n            <BookListContainer />\r\n            <ShoppingCartTable />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default HomePage;","import React from 'react';\r\n\r\nconst CartPage = () => {\r\n    return <div>Cart Page</div>\r\n}\r\n\r\nexport default CartPage;","import App from './app';\r\n\r\nexport default App;","import React from 'react';\r\nimport { Route, Switch, Redirect } from 'react-router-dom';\r\n\r\nimport ShopHeader from '../shop-header';\r\nimport { HomePage, CartPage } from '../pages';\r\n\r\nimport './app.css';\r\n\r\nconst App = () => {\r\n    return (\r\n        <main role=\"main\" className=\"app container\">\r\n            <ShopHeader />\r\n            <Switch>\r\n                <Route path='/re-store/' exact component={HomePage} />\r\n                <Route path='/re-store/home/' exact component={HomePage} />\r\n                <Route path='/re-store/cart/' component={CartPage} />\r\n                <Redirect to='/re-store/' />\r\n            </Switch>\r\n        </main>\r\n    )\r\n}\r\n\r\nexport default App;\r\n","import ErrorBoundry from './error-boundry';\r\n\r\nexport default ErrorBoundry;","import React, { Component } from 'react';\r\n\r\nimport ErrorIndicator from '../error-indicator';\r\n\r\nexport default class ErrorBoundry extends Component {\r\n\r\n    state = {\r\n        hasError: false,\r\n    }\r\n\r\n    componentDidCatch() {\r\n        this.setState({hasError: true})\r\n    }\r\n\r\n    render() {\r\n\r\n        if (this.state.hasError) {\r\n            return <ErrorIndicator />\r\n        }\r\n\r\n        return this.props.children;\r\n    }\r\n}","export default class BookstoreService {\r\n\r\n    data = [\r\n        {\r\n            id: 1,\r\n            title: 'Prodaction-Ready Microservices',\r\n            author: 'Susan J. Fowler',\r\n            price: 32,\r\n            coverImage: 'https://images-na.ssl-images-amazon.com/images/I/41yJ75gpV-L._SX381_BO1,204,203,200_.jpg',\r\n        },\r\n        {\r\n            id: 2,\r\n            title: 'Release it!',\r\n            author: 'Michael T. Nygard',\r\n            price: 45,\r\n            coverImage: 'https://images-na.ssl-images-amazon.com/images/I/414CRjLjwgL._SX403_BO1,204,203,200_.jpg'\r\n        }\r\n    ]\r\n\r\n    getBooks() {\r\n        return new Promise((resolve, reject) => {\r\n            setTimeout(() => {\r\n                if (Math.random() > .9) {\r\n                    reject(new Error('Something bad happened'))\r\n                } else {\r\n                    resolve(this.data)\r\n                }\r\n            }, 700)\r\n        })\r\n    }\r\n}","const updateBookList = (state, action) => {\r\n\r\n   if (state === undefined) {\r\n      return {\r\n         books: [],\r\n         loading: true,\r\n         error: false,\r\n      }\r\n   }\r\n\r\n   switch(action.type) {\r\n      case 'FETCH_BOOKS_REQUEST':\r\n         return {\r\n            books: [],\r\n            loading: true,\r\n            error: false,\r\n         }\r\n\r\n      case 'FETCH_BOOKS_SUCCESS':\r\n         return {\r\n            books: action.payload,\r\n            loading: false,\r\n            error: false,\r\n         }\r\n\r\n      case 'FETCH_BOOKS_FAILURE':\r\n         return {\r\n            books: [],\r\n            loading: false,\r\n            error: action.payload,\r\n         }\r\n      \r\n      default:\r\n         return state.bookList\r\n   }\r\n}\r\n\r\nexport default updateBookList","const updateCartItems = (cartItems, item, idx) => {\r\n\r\n   if (item.count === 0) {\r\n      return [\r\n         ...cartItems.slice(0, idx),\r\n         ...cartItems.slice(idx + 1),\r\n      ]\r\n   }\r\n\r\n   if (idx === -1) {\r\n      return [\r\n         ...cartItems,\r\n         item\r\n      ]\r\n   } else {\r\n      return [\r\n         ...cartItems.slice(0, idx),\r\n         item,\r\n         ...cartItems.slice(idx + 1),\r\n      ]\r\n   }\r\n}\r\n\r\nconst updateCartItem = (book, item = {}, quantity) => {\r\n\r\n   const { id = book.id, title = book.title, count = 0, total = 0 } = item;\r\n\r\n   return {\r\n      id,\r\n      title,\r\n      count: count + quantity,\r\n      total: total + quantity * book.price,\r\n   }\r\n}\r\n\r\nconst updateOrderTotal = (cartItems) => {\r\n   let totalSum = 0;\r\n   cartItems.forEach((item) => {\r\n      totalSum += item.total\r\n   })\r\n\r\n   return totalSum\r\n}\r\n\r\nconst updateCountTotal = (cartItems) => {\r\n   let totalSum = 0;\r\n   cartItems.forEach((item) => {\r\n      totalSum += item.count\r\n   })\r\n\r\n   return totalSum\r\n}\r\n\r\nconst updateOrder = (state, payload, quantity) => {\r\n\r\n   const { bookList: { books }, shoppingCart: { cartItems } } = state;\r\n   const id = payload;\r\n   const book = books.find((book) => book.id === id);\r\n   const idx = cartItems.findIndex(({id}) => id === book.id);\r\n   const item = cartItems.find(({id}) => id === book.id);\r\n\r\n   const newItem = updateCartItem(book, item, quantity);\r\n   \r\n   return {\r\n      countTotal: updateCountTotal( updateCartItems(cartItems, newItem, idx) ),\r\n      orderTotal: updateOrderTotal( updateCartItems(cartItems, newItem, idx) ),\r\n      cartItems: updateCartItems(cartItems, newItem, idx)\r\n   }\r\n}\r\n\r\nconst updateShoppingCart = (state, action) => {\r\n\r\n   if (state === undefined) {\r\n      return {\r\n         countTotal: 0,\r\n         cartItems: [],\r\n         orderTotal: 0,\r\n      }\r\n   }\r\n   \r\n   switch(action.type) {\r\n      case 'BOOK_ADDED_TO_CART':\r\n         return updateOrder(state, action.payload, 1)\r\n\r\n      case 'ALL_BOOKS_REMOVED_FROM_CART':\r\n         const item = state.shoppingCart.cartItems.find((book) => book.id ===action.payload);\r\n         return updateOrder(state, action.payload, -item.count)\r\n         \r\n      case 'BOOK_REMOVED_FROM_CART':\r\n         return updateOrder(state, action.payload, -1)\r\n\r\n      default: \r\n         return state.shoppingCart\r\n   }\r\n}\r\n\r\nexport default updateShoppingCart","import updateBookList from './book-list';\r\nimport updateShoppingCart from './shopping-cart';\r\n\r\nconst reducer = (state, action) => {\r\n   return {\r\n      bookList: updateBookList(state, action),\r\n      shoppingCart: updateShoppingCart(state, action)\r\n   }\r\n}\r\n\r\nexport default reducer\r\n","import { createStore, applyMiddleware } from 'redux';\r\nimport thunkMiddleware from 'redux-thunk';\r\n\r\nimport reducer from './reducers';\r\n\r\nconst stringMiddleware = () => (next) => (action) => {\r\n   if (typeof action === 'string') {\r\n      return next({\r\n         type: action\r\n      })\r\n   }\r\n   return next(action)\r\n}\r\n\r\nconst store = createStore(reducer, applyMiddleware(\r\n   thunkMiddleware, stringMiddleware));\r\n\r\nexport default store","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from 'react-redux';\r\nimport { BrowserRouter as Router } from 'react-router-dom';\r\n\r\nimport App from './components/app';\r\nimport ErrorBoundry from './components/error-boundry';\r\nimport { BookstoreServiceProvider } from './components/bookstore-service-context';\r\nimport BookstoreService from './services/bookstore-service';\r\nimport store from './store';\r\n\r\nconst bookstoreService = new BookstoreService();\r\n\r\nReactDOM.render(\r\n    <Provider store={store}>\r\n        <ErrorBoundry>\r\n            <BookstoreServiceProvider value={bookstoreService}>\r\n                <Router>\r\n                    <App />\r\n                </Router>\r\n            </BookstoreServiceProvider>\r\n        </ErrorBoundry>\r\n    </Provider>,\r\n    document.getElementById('root')\r\n)\r\n"],"sourceRoot":""}